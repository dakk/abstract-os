/*
 * AbastractOS
 * Copyright (C) 2011 Davide Gessa
 * 
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation; either version 2
 * of the License, or (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
 */
#include "abGuiManager.hpp"
#include <Driver.hpp>
#include <arch.h>
#include <malloc.h>
#include <Managers.hpp>
#include <stdio.h>
#include <mm/mm.h>

#include "abWindow.hpp"
#include "abWidget.hpp"
#include "abLoader.hpp"
#include "abLabel.hpp"
#include "abText.hpp"
#include "abButton.hpp"

using namespace abGui;

 

const char abDefaultFont8x16[][16] = {
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
	{ 0x0, 0x0, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0xa, 0xa, 0xa, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x24, 0x24, 0x7e, 0x24, 0x24, 0x24, 0x7e, 0x24, 0x24, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x8, 0x1c, 0x2a, 0xa, 0xc, 0x18, 0x28, 0x2a, 0x1c, 0x8, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x4, 0x8a, 0x4a, 0x24, 0x10, 0x48, 0xa4, 0xa2, 0x40, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x4, 0xa, 0xa, 0xa, 0x4, 0x2a, 0x12, 0x2c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x2, 0x2, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x4, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x4, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x2, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x2, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0xa, 0x4, 0xa, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x8, 0x8, 0x3e, 0x8, 0x8, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x4, 0x4, 0x2, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x6, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x10, 0x10, 0x10, 0x8, 0x8, 0x4, 0x4, 0x2, 0x2, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x1c, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x1c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x8, 0xe, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x1c, 0x22, 0x20, 0x20, 0x10, 0x8, 0x4, 0x2, 0x3e, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x1c, 0x22, 0x20, 0x20, 0x18, 0x20, 0x20, 0x22, 0x1c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x10, 0x18, 0x14, 0x14, 0x12, 0x3e, 0x10, 0x10, 0x10, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x3e, 0x2, 0x2, 0x1e, 0x22, 0x20, 0x20, 0x22, 0x1c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x10, 0x8, 0x4, 0x2, 0x1e, 0x22, 0x22, 0x22, 0x1c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x3e, 0x20, 0x10, 0x10, 0x8, 0x8, 0x4, 0x4, 0x4, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x1c, 0x22, 0x22, 0x22, 0x1c, 0x22, 0x22, 0x22, 0x1c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x1c, 0x22, 0x22, 0x22, 0x3c, 0x20, 0x10, 0x8, 0x4, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x4, 0x0, 0x0, 0x0, 0x4, 0x4, 0x2, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x10, 0x8, 0x4, 0x2, 0x4, 0x8, 0x10, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3e, 0x0, 0x3e, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x4, 0x8, 0x10, 0x8, 0x4, 0x2, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x1c, 0x22, 0x22, 0x20, 0x10, 0x8, 0x8, 0x0, 0x8, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0xf0, 0x8, 0x4, 0x62, 0x92, 0x92, 0xe2, 0x4, 0x8, 0xf0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x8, 0x8, 0x14, 0x14, 0x22, 0x3e, 0x41, 0x41, 0x41, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x3e, 0x42, 0x42, 0x42, 0x3e, 0x42, 0x42, 0x42, 0x3e, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x3c, 0x42, 0x2, 0x2, 0x2, 0x2, 0x2, 0x42, 0x3c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x1e, 0x22, 0x42, 0x42, 0x42, 0x42, 0x42, 0x22, 0x1e, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x3e, 0x2, 0x2, 0x2, 0x1e, 0x2, 0x2, 0x2, 0x3e, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x3e, 0x2, 0x2, 0x2, 0x1e, 0x2, 0x2, 0x2, 0x2, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x3c, 0x42, 0x2, 0x2, 0x72, 0x42, 0x42, 0x42, 0x3c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x42, 0x42, 0x42, 0x42, 0x7e, 0x42, 0x42, 0x42, 0x42, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x9, 0x9, 0x6, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x42, 0x22, 0x12, 0xa, 0x6, 0xa, 0x12, 0x22, 0x42, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x3e, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x82, 0xc6, 0xc6, 0xaa, 0xaa, 0x92, 0x92, 0x82, 0x82, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x42, 0x42, 0x46, 0x4a, 0x4a, 0x52, 0x62, 0x42, 0x42, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x3c, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x3c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x3e, 0x42, 0x42, 0x42, 0x3e, 0x2, 0x2, 0x2, 0x2, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x3c, 0x42, 0x42, 0x42, 0x42, 0x42, 0x52, 0x62, 0x3c, 0x40, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x3e, 0x42, 0x42, 0x42, 0x3e, 0x12, 0x22, 0x42, 0x42, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x1c, 0x22, 0x2, 0x2, 0x1c, 0x20, 0x20, 0x22, 0x1c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x3e, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x3c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x41, 0x41, 0x22, 0x22, 0x22, 0x14, 0x14, 0x14, 0x8, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x1, 0x1, 0x22, 0x22, 0x52, 0x54, 0x54, 0x88, 0x88, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x41, 0x41, 0x22, 0x14, 0x8, 0x14, 0x22, 0x41, 0x41, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x41, 0x41, 0x22, 0x14, 0x8, 0x8, 0x8, 0x8, 0x8, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x7f, 0x40, 0x20, 0x10, 0x8, 0x4, 0x2, 0x1, 0x7f, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x6, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x6, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x2, 0x2, 0x2, 0x4, 0x4, 0x8, 0x8, 0x10, 0x10, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x6, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x6, 0x0, 0x0 },
	{ 0x0, 0x8, 0x14, 0x22, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3f, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x2, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1c, 0x20, 0x3c, 0x22, 0x22, 0x3c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x2, 0x2, 0x2, 0x1e, 0x22, 0x22, 0x22, 0x22, 0x1e, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1c, 0x22, 0x2, 0x2, 0x22, 0x1c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x20, 0x20, 0x20, 0x3c, 0x22, 0x22, 0x22, 0x22, 0x3c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1c, 0x22, 0x3e, 0x2, 0x22, 0x1c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x4, 0x2, 0x2, 0x6, 0x2, 0x2, 0x2, 0x2, 0x2, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1c, 0x22, 0x22, 0x22, 0x22, 0x3c, 0x20, 0x1c, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x2, 0x2, 0x2, 0x1a, 0x26, 0x22, 0x22, 0x22, 0x22, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x1, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x2, 0x2, 0x2, 0x22, 0x12, 0xa, 0xe, 0x12, 0x22, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x6e, 0x92, 0x92, 0x92, 0x92, 0x92, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1a, 0x26, 0x22, 0x22, 0x22, 0x22, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1c, 0x22, 0x22, 0x22, 0x22, 0x1c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1e, 0x22, 0x22, 0x22, 0x22, 0x1e, 0x2, 0x2, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3c, 0x22, 0x22, 0x22, 0x22, 0x3c, 0x20, 0x20, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x6, 0x2, 0x2, 0x2, 0x2, 0x2, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xc, 0x12, 0x4, 0x8, 0x12, 0xc, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x2, 0x2, 0x6, 0x2, 0x2, 0x2, 0x2, 0x4, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x22, 0x22, 0x22, 0x22, 0x32, 0x2c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x22, 0x22, 0x14, 0x14, 0x8, 0x8, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x92, 0xaa, 0xaa, 0xaa, 0x44, 0x44, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x12, 0x12, 0xc, 0xc, 0x12, 0x12, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x12, 0x12, 0x12, 0x12, 0x12, 0x1c, 0x10, 0xe, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1e, 0x10, 0x8, 0x4, 0x2, 0x1e, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x8, 0x4, 0x4, 0x4, 0x4, 0x2, 0x4, 0x4, 0x4, 0x4, 0x8, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x2, 0x4, 0x4, 0x4, 0x4, 0x8, 0x4, 0x4, 0x4, 0x4, 0x2, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x4c, 0x32, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x1c, 0x22, 0x2, 0xf, 0x2, 0xf, 0x2, 0x22, 0x1c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x4, 0x2, 0x0, 0x0, 0x0 },
	{ 0x0, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x14, 0xa, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2a, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x4, 0x4, 0x1f, 0x4, 0x4, 0x4, 0x4, 0x4, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x4, 0x4, 0x1f, 0x4, 0x4, 0x4, 0x1f, 0x4, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x86, 0x49, 0x26, 0x10, 0x8, 0x4, 0x32, 0xc9, 0x30, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x14, 0x8, 0x1c, 0x22, 0x2, 0x2, 0x1c, 0x20, 0x20, 0x22, 0x1c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x8, 0x4, 0x2, 0x4, 0x8, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x0, 0x0 },
	{ 0x0, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x0, 0x0 },
	{ 0x0, 0x14, 0x8, 0x7f, 0x40, 0x20, 0x10, 0x8, 0x4, 0x2, 0x1, 0x7f, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x0, 0x0 },
	{ 0x0, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x4, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x4, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0xa, 0x5, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0xa, 0x5, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xc, 0x1e, 0xc, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xe, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3f, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0xb7, 0x52, 0x12, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x14, 0x8, 0x0, 0xc, 0x12, 0x4, 0x8, 0x12, 0xc, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x4, 0x8, 0x10, 0x8, 0x4, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x0, 0x0 },
	{ 0x0, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x14, 0x8, 0x0, 0x1e, 0x10, 0x8, 0x4, 0x2, 0x1e, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x10, 0x1c, 0x22, 0x2, 0x2, 0x22, 0x1c, 0x4, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x1c, 0x22, 0x2, 0x4, 0x1f, 0x4, 0x4, 0x2, 0x3e, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x22, 0x1c, 0x22, 0x22, 0x1c, 0x22, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x22, 0x22, 0x22, 0x14, 0x3e, 0x8, 0x3e, 0x8, 0x8, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x2, 0x2, 0x2, 0x2, 0x2, 0x0, 0x2, 0x2, 0x2, 0x2, 0x2, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x1c, 0x22, 0x4, 0xa, 0x12, 0x24, 0x28, 0x10, 0x22, 0x1c, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x5, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x78, 0x84, 0x32, 0xa, 0xa, 0x32, 0x84, 0x78, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x6, 0x8, 0xe, 0xa, 0xe, 0x0, 0xe, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x28, 0x14, 0xa, 0x14, 0x28, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3e, 0x20, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x6, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x7c, 0x82, 0x9a, 0x9a, 0xaa, 0x82, 0x7c, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x3f, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x4, 0xa, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x8, 0x8, 0x3e, 0x8, 0x8, 0x0, 0x3e, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x2, 0x5, 0x4, 0x2, 0x7, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x3, 0x4, 0x2, 0x4, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x4, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x12, 0x12, 0x12, 0x12, 0x12, 0x2e, 0x2, 0x2, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x3c, 0x2a, 0x2a, 0x2c, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x4, 0x2, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x4, 0x6, 0x4, 0x4, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0xe, 0xa, 0xa, 0xa, 0xe, 0x0, 0xe, 0x0, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xa, 0x14, 0x28, 0x14, 0xa, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x4, 0x86, 0x44, 0xa4, 0xd4, 0xa8, 0xe4, 0x82, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x4, 0x86, 0x44, 0x24, 0xf4, 0x88, 0x44, 0xe2, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0xe, 0x88, 0x4c, 0xa8, 0xd6, 0xa8, 0xe4, 0x82, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x8, 0x0, 0x8, 0x8, 0x8, 0x4, 0x2, 0x22, 0x22, 0x1c, 0x0 },
	{ 0x0, 0x0, 0x4, 0x8, 0x8, 0x8, 0x14, 0x14, 0x22, 0x3e, 0x41, 0x41, 0x41, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x10, 0x8, 0x8, 0x8, 0x14, 0x14, 0x22, 0x3e, 0x41, 0x41, 0x41, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x8, 0x14, 0x0, 0x8, 0x14, 0x14, 0x22, 0x3e, 0x41, 0x41, 0x41, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x2c, 0x1a, 0x8, 0x8, 0x14, 0x14, 0x22, 0x3e, 0x41, 0x41, 0x41, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x22, 0x0, 0x8, 0x8, 0x14, 0x14, 0x22, 0x3e, 0x41, 0x41, 0x41, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x8, 0x14, 0x8, 0x8, 0x14, 0x14, 0x22, 0x3e, 0x41, 0x41, 0x41, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0xe0, 0x30, 0x28, 0x28, 0xfc, 0x24, 0x22, 0x22, 0xe1, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x3c, 0x42, 0x2, 0x2, 0x2, 0x2, 0x2, 0x42, 0x3c, 0x10, 0x8, 0x0 },
	{ 0x0, 0x0, 0x4, 0x8, 0x3e, 0x2, 0x2, 0x2, 0x1e, 0x2, 0x2, 0x2, 0x3e, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x10, 0x8, 0x3e, 0x2, 0x2, 0x2, 0x1e, 0x2, 0x2, 0x2, 0x3e, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x8, 0x14, 0x3e, 0x2, 0x2, 0x2, 0x1e, 0x2, 0x2, 0x2, 0x3e, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x22, 0x0, 0x3e, 0x2, 0x2, 0x2, 0x1e, 0x2, 0x2, 0x2, 0x3e, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x1, 0x2, 0x0, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x4, 0x2, 0x0, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x2, 0x5, 0x0, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x5, 0x0, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x1e, 0x22, 0x42, 0x42, 0x4f, 0x42, 0x42, 0x22, 0x1e, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x4c, 0x32, 0x42, 0x42, 0x46, 0x4a, 0x4a, 0x52, 0x62, 0x42, 0x42, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x8, 0x10, 0x3c, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x3c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x10, 0x8, 0x3c, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x3c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x18, 0x24, 0x3c, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x3c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x4c, 0x32, 0x3c, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x3c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x24, 0x0, 0x3c, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x3c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x22, 0x14, 0x8, 0x14, 0x22, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x7c, 0x62, 0x52, 0x52, 0x4a, 0x4a, 0x46, 0x46, 0x3e, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x8, 0x10, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x3c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x10, 0x8, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x3c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x18, 0x24, 0x0, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x3c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x24, 0x0, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x3c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x10, 0x8, 0x41, 0x41, 0x22, 0x14, 0x8, 0x8, 0x8, 0x8, 0x8, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x2, 0x2, 0x3e, 0x42, 0x42, 0x3e, 0x2, 0x2, 0x2, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0xe, 0x12, 0x12, 0xa, 0x12, 0x22, 0x22, 0x22, 0x1a, 0x2, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x8, 0x10, 0x0, 0x1c, 0x20, 0x3c, 0x22, 0x22, 0x3c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x10, 0x8, 0x0, 0x1c, 0x20, 0x3c, 0x22, 0x22, 0x3c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x8, 0x14, 0x0, 0x1c, 0x20, 0x3c, 0x22, 0x22, 0x3c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x28, 0x14, 0x0, 0x1c, 0x20, 0x3c, 0x22, 0x22, 0x3c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x24, 0x0, 0x0, 0x1c, 0x20, 0x3c, 0x22, 0x22, 0x3c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x8, 0x14, 0x8, 0x0, 0x1c, 0x20, 0x3c, 0x22, 0x22, 0x3c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xdc, 0x20, 0xfc, 0x22, 0x22, 0xfc, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1c, 0x22, 0x2, 0x2, 0x22, 0x1c, 0x8, 0x4, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x4, 0x8, 0x0, 0x1c, 0x22, 0x3e, 0x2, 0x22, 0x1c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x10, 0x8, 0x0, 0x1c, 0x22, 0x3e, 0x2, 0x22, 0x1c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x8, 0x14, 0x0, 0x1c, 0x22, 0x3e, 0x2, 0x22, 0x1c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x22, 0x0, 0x0, 0x1c, 0x22, 0x3e, 0x2, 0x22, 0x1c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x1, 0x2, 0x0, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x8, 0x4, 0x0, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x4, 0xa, 0x0, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0xa, 0x0, 0x0, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0xa, 0x4, 0xa, 0x10, 0x1c, 0x22, 0x22, 0x22, 0x1c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x2c, 0x1a, 0x0, 0x1a, 0x26, 0x22, 0x22, 0x22, 0x22, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x4, 0x8, 0x0, 0x1c, 0x22, 0x22, 0x22, 0x22, 0x1c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x10, 0x8, 0x0, 0x1c, 0x22, 0x22, 0x22, 0x22, 0x1c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x8, 0x14, 0x0, 0x1c, 0x22, 0x22, 0x22, 0x22, 0x1c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x2c, 0x1a, 0x0, 0x1c, 0x22, 0x22, 0x22, 0x22, 0x1c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x22, 0x0, 0x0, 0x1c, 0x22, 0x22, 0x22, 0x22, 0x1c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x8, 0x0, 0x3e, 0x0, 0x8, 0x0, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3c, 0x32, 0x2a, 0x2a, 0x26, 0x1e, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x4, 0x8, 0x0, 0x22, 0x22, 0x22, 0x22, 0x32, 0x2c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x10, 0x8, 0x0, 0x22, 0x22, 0x22, 0x22, 0x32, 0x2c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x8, 0x14, 0x0, 0x22, 0x22, 0x22, 0x22, 0x32, 0x2c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x22, 0x0, 0x0, 0x22, 0x22, 0x22, 0x22, 0x32, 0x2c, 0x0, 0x0, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x8, 0x4, 0x0, 0x12, 0x12, 0x12, 0x12, 0x12, 0x1c, 0x10, 0xe, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x2, 0x1e, 0x22, 0x22, 0x22, 0x22, 0x1e, 0x2, 0x2, 0x0 },
	{ 0x0, 0x0, 0x0, 0x0, 0x12, 0x0, 0x0, 0x12, 0x12, 0x12, 0x12, 0x12, 0x1c, 0x10, 0xe, 0x0 }
	};
	


#define ABDRAW_PIXEL(X, Y, CL)\
{ \
	register unsigned xy = ((X) * (m_Bpp >> 3)) + ((Y) * m_Bpsl); 	\
	m_RendBuf[xy] = (CL) & 0xFF;  	\
	m_RendBuf[xy+1] = ((CL) >> 8) & 0xFF; \
	m_RendBuf[xy+2] = ((CL) >> 16) & 0xFF; \
}

/**  */
abGuiManager::abGuiManager()
{
}



/** Destroy the gui */
abGuiManager::~abGuiManager()
{
}


bool
abGuiManager::Init()
{
	VesaDriver::ModeInfo *vmi;
	

	m_Vesa = (VesaDriver *) Managers::Instance->deviceManager->getDevice("ve0")->getDriver();
	m_Mouse = (MouseDriver *) Managers::Instance->deviceManager->getDevice("ps0")->getDriver();

	if((m_Vesa == NULL))
		return false;

	SizeX = m_Vesa->getX();
	SizeY = m_Vesa->getY();

	vmi = m_Vesa->getModeInfo();
	m_Bpp = vmi->bits_per_pixel;
	m_Bpsl = vmi->bytes_per_scan_line;

	m_RendDim = m_Vesa->getBpp() / 8 * m_Vesa->getX() * m_Vesa->getY();
	m_RendBuf = (char *) malloc(m_RendDim);

	m_Vesa->Memory = (char *) vmi->phys_base_ptr;


	#ifdef ABGUI_LOADER
		guiLoader = new Loader();
	#endif
	return true;
}


/** Gui mainloop */
void
abGuiManager::mainLoop()
{
	bool exit;
	unsigned i;
	Window *tmpwin;

	if((m_Vesa == NULL))
		return;

	m_MouseX = m_Vesa->getX() / 2;
	m_MouseY = m_Vesa->getY() / 2;

	/* Initialize the theme class with the default theme */
	guiTheme = new Theme();

	/* Initialize gui system */
	m_ActiveDesktop = 0;

	for(i = 0; i < 4; i++)
		m_WindowList[i] = new list<Window>();


	drawRect(0, 0, SizeX, SizeY, guiTheme->BackgroundColor, true);
	
	/* Test windows */
	Window *w = new Window();
	w->setTitle("Editor");
	w->setSize(300, 200);

	Widget *wd;
	//= new Label("");
	//wd->setPosition(10, 3);
	//w->addWidget(wd);

	wd = new Button("Save");
	wd->setPosition(10, 3);
	w->addWidget(wd);

	
	wd = new Button("Load");
	wd->setPosition(100, 3);
	w->addWidget(wd);


	wd = new Text();
	wd->setPosition(10, 20);
	wd->setSize(280, 170);
	w->addWidget(wd);



	w = new Window();
	w->setTitle("Terminal");
	w->setSize(300, 200);
	w->setPosition(350, 150);

	Text *t = new Text();
	t->setPosition(0, 0);
	t->setSize(300, 200);
	t->setBackgroundColor(0);
	//wd->setTextColor(0xFFFFFF);
	w->addWidget(t);



	exit = false;

	while(!exit)
	{		
		/* Clear */
		//clearBuffer();
		//drawRect(0, 0, SizeX, SizeY, guiTheme->BackgroundColor, true);
		drawRect(m_MouseX - 20, m_MouseY - 20, m_MouseX + 20, m_MouseY + 20, guiTheme->BackgroundColor, true);


		/* Check event */
		m_MouseX += m_Mouse->getX();
		m_MouseX = (m_MouseX < 0) ? 0 : m_MouseX; 
		m_MouseX = (m_MouseX > SizeX) ? SizeX : m_MouseX; 

		m_MouseY += m_Mouse->getY();
		m_MouseY = (m_MouseY < 0) ? 0 : m_MouseY; 
		m_MouseY = (m_MouseY > SizeY) ? SizeY : m_MouseY; 

		if(m_Mouse->getClickedLt())
			drawImage(guiTheme->CursorImage, 100, m_MouseY);

		/* Draw windows */
		tmpwin = m_WindowList[m_ActiveDesktop]->getNode(0);

		while(tmpwin != NULL)
		{
			tmpwin->Draw();
			tmpwin = tmpwin->Next;
		}

		/* Draw cursor */
		drawImage(guiTheme->CursorImage, m_MouseX, m_MouseY);

		/* Swap buffer */
		#if 1
    	  	while ((io_inb(0x3DA) & 0x08));
	      	while (!(io_inb(0x3DA) & 0x08));
		#endif
		swapBuffer();
	}

	delete guiTheme;
}


/** Probe the gui */
bool 
abGuiManager::Probe() 
{
	bool probe_state;

	VesaDriver *vd = new VesaDriver();
	probe_state = vd->Probe();
	delete(vd);

	return probe_state;
}




/**
 * Swap the buffer in the video ram 
 *
 * \param x0 start in x
 * \param x1 end in x
 * \param y0 start in y
 * \param y1 end in y
 */
void 
abGuiManager::swapBuffer(unsigned x0, unsigned y0, unsigned x1, unsigned y1)
{
	register unsigned loc;

	if(x0 == x1)
		memcpy(m_Vesa->Memory, m_RendBuf, m_RendDim);
	else
	{
		for(; y0 < y1; y1--)
		{
			for(; x0 < x1; x1--)
			{
				loc = (y1 * m_Bpsl) + (x1 * (m_Bpp >> 3));
				m_Vesa->Memory[loc] = m_RendBuf[loc];
			}
		}
	}
}




void 
abGuiManager::clearBuffer(unsigned x0, unsigned y0, unsigned x1, unsigned y1)
{
	if(x0 == x1)
		memset(m_RendBuf, 0, m_RendDim);
	else
	{
		register unsigned loc;


		for(;y0 < y1; y1--)
		{
			for(; x0 < x1; x1--)
			{
				loc = (y1 * m_Bpsl) + (x1 * (m_Bpp >> 3));
				m_RendBuf[loc] = 0;
			}
		}
	}
}




/** Draw a pixel */
void 
abGuiManager::drawPixel(unsigned x, unsigned y, unsigned cl)
{		
	register unsigned xy = (x * (m_Bpp >> 3)) + (y * m_Bpsl);

	m_RendBuf[xy] = cl & 0xFF;
	m_RendBuf[xy+1] = (cl >> 8) & 0xFF;
	m_RendBuf[xy+2] = (cl >> 16) & 0xFF;
}

 

/** Draw a rect */
void 
abGuiManager::drawRect(unsigned x0, unsigned y0, unsigned x1, unsigned y1, unsigned cl, bool fill)
{
	drawLine(x0, y0, x1, y0, cl);
	drawLine(x0, y0, x0, y1, cl);
	drawLine(x1, y0, x1, y1, cl);
	drawLine(x0, y1, x1, y1, cl);

	if(fill)
	{
		for(;y0 < y1; y1--)
			drawLine(x0, y1, x1, y1, cl);
	}
}


/** Draw a rect with a gradient */
void
abGuiManager::drawGradientRect(unsigned x0, unsigned y0, unsigned x1, unsigned y1, unsigned start, unsigned end, bool lr)
{
	int sum_factor = ((uint8_t) start - (uint8_t) end); // * (start - end) / (start - end);
	if(lr)
	{
		sum_factor /= (x1 - x0);

		for(; x0 < x1; x1--)
		{
			drawLine(x1, y0, x1, y1, start);
			start += sum_factor;
		}

	}
	else
	{
		sum_factor /= (y1 - y0);
		
		for(; y0 < y1; y1--)
		{
			drawLine(x0, y1, x1, y1, start);
			start += sum_factor;
		}
	}
}


/** Draw a text string */
void 
abGuiManager::drawText(char *data, unsigned x, unsigned y, unsigned cl)
{
	register char *let_data;
	register unsigned i, j;
	
	while(*data != '\0')
	{
		let_data = (char *) abDefaultFont8x16[(unsigned) (*data)];

		for(i = 0; i < 16; i++)
		{
			for(j = 0; j < 8; j++)
			{			
				if((let_data[i] & (1 << j)) != 0)
					ABDRAW_PIXEL((x + j), (y + i-4), ((uint32_t) cl));
			}
		}

		x += 8;
		data++;
	}
}



/** Draw a line */
void 
abGuiManager::drawLine(unsigned x0, unsigned y0, unsigned x1, unsigned y1, unsigned cl)
{
	if(x0 == x1)
	{
		for(; y0 < y1; y0++)
			ABDRAW_PIXEL(x0, y0, cl);
	}
	else if(y1 == y0)
	{
		for(; x0 < x1; x0++)
			ABDRAW_PIXEL(x0, y0, cl);
	}
	else
	{
		register unsigned factor = (y1 - y0) / (x1 - x0);

		for(; x0 < x1; x0++, y0+=factor)
			ABDRAW_PIXEL(x0, y0, cl); 
	}
}




void 
abGuiManager::drawImage(Image *i, unsigned x, unsigned y)
{
	drawBuffer((uint32_t *) i->Buffer, x, y, i->SizeX, i->SizeY);
}


/** Draw a buffer */
void 
abGuiManager::drawBuffer(uint32_t *data, unsigned x, unsigned y, unsigned dimx, unsigned dimy)
{
/*	register unsigned i, k;
	dimy--;
	for(i = 0; i < dimx; i++)
		for(; 0 < dimy; dimy--)
		{
			k = dimy * dimx + i;
			if(data[k] != ABGUI_TRASP)
				ABDRAW_PIXEL(x + i, y + dimy, data[k]);
		}
*/
	register unsigned i, j, k;

	for(i = 0; i < dimx; i++)
		for(j = 0; j < dimy; j++)
		{
			k = j * dimx + i;
			if(data[k] != ABGUI_TRASP)
				ABDRAW_PIXEL((x + i), (y + j), data[k]);
		}
}



void 
abGuiManager::appendWindow(Window *w)
{
	m_WindowList[m_ActiveDesktop]->addNode(w);
}

